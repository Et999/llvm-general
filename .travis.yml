language: haskell
env:
 - GHCVER=7.6.3 CABALVER=1.18
 - GHCVER=7.8.3 CABALVER=1.18
 - GHCVER=7.10.1 CABALVER=1.22
install:
 - travis_retry sudo add-apt-repository -y ppa:hvr/ghc
 - travis_retry sudo apt-get update
 - travis_retry sudo apt-get install cabal-install-$CABALVER ghc-$GHCVER
 - export PATH=/opt/ghc/$GHCVER/bin:/opt/cabal/$CABALVER/bin:$PATH
 - cabal --version
 - sudo /opt/ghc/$GHCVER/bin/ghc-pkg recache
 - /opt/ghc/$GHCVER/bin/ghc-pkg recache --user
 - cabal update
 - cabal install shake
 - wget -P downloads/ http://llvm.org/releases/3.5.1/llvm-3.5.1.src.tar.xz
script:
 - runhaskell Shake.hs test
